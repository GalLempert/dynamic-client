<form [formGroup]="form" class="space-y-4">
  <div *ngFor="let field of fields" class="mb-4">
    <label class="block text-gray-700 font-semibold mb-1 capitalize">{{ field }}</label>

    <!-- Read Mode -->
    <div *ngIf="!isEditing" class="p-2 bg-gray-50 border border-gray-200 rounded text-gray-800">
      {{ isPrimitive(field) ? data[field] : '[Complex Object]' }}
    </div>

    <!-- Edit Mode -->
    <div *ngIf="isEditing && isPrimitive(field)">
       <!-- Boolean -->
       <div *ngIf="isBoolean(field)" class="flex items-center">
         <input type="checkbox"
              [formControlName]="field"
              [attr.disabled]="schema.properties[field].readOnly ? true : null"
              class="h-5 w-5 text-blue-600 rounded border-gray-300">
         <span class="ml-2 text-sm text-gray-600">Enabled</span>
       </div>

       <!-- Number/Text -->
       <input *ngIf="!isBoolean(field)"
              [type]="getFieldType(field)"
              [formControlName]="field"
              [attr.disabled]="schema.properties[field].readOnly ? true : null"
              class="input focus:ring-2 focus:ring-blue-500"
              [class.bg-gray-100]="schema.properties[field].readOnly">

       <p *ngIf="schema.properties[field].readOnly" class="text-xs text-gray-500 mt-1">Read-only field</p>
    </div>

    <div *ngIf="isEditing && !isPrimitive(field)" class="text-gray-400 italic text-sm">
        Complex objects cannot be edited in this view.
    </div>
  </div>
</form>
